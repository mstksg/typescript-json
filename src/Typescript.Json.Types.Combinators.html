<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase                 #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs                     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase                #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses     #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds                 #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables       #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators             #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Module      : Typescript.Json.Types.Combinators</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Copyright   : (c) Justin Le 2021</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- License     : BSD3</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Maintainer  : justin@jle.im</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- Portability : non-portable</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- Invariant &quot;Functor combinators&quot; (a la &quot;Data.Functor.Combinator&quot;) used</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- for type definitions.</span><span>
</span><span id="line-24"></span><span class="hs-comment">--</span><span>
</span><span id="line-25"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Typescript.Json.Types.Combinators</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier">PS</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier">ILan</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ilan"><span class="hs-identifier">ilan</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretILan"><span class="hs-identifier">interpretILan</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretCoILan"><span class="hs-identifier">interpretCoILan</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretContraILan"><span class="hs-identifier">interpretContraILan</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier">ICoyoneda</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#icoToContraco"><span class="hs-identifier">icoToContraco</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#icoToCoco"><span class="hs-identifier">icoToCoco</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier">MP</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier">NP2</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#hmap2"><span class="hs-identifier">hmap2</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#htraverse2"><span class="hs-identifier">htraverse2</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#hfoldMap2"><span class="hs-identifier">hfoldMap2</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#np2Left"><span class="hs-identifier">np2Left</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#splitAp"><span class="hs-identifier">splitAp</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#findNP"><span class="hs-identifier">findNP</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative.Free</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Functor.Combinator</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Functor.Contravariant</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Functor.Invariant</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Some</span></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Some</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Contravariant.Coyoneda</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-comment">-- | Give @f@ an 'Invariant' instance, except the post-map can be partial.</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- PS stands for parser-and-serializer: With a @'PS' f a@, you can</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- serialize an @a@ using it (total), or you can parse an @a@ out of it</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- (partial, with a 'Text' error).</span><span>
</span><span id="line-60"></span><span class="hs-keyword">data</span><span> </span><span id="PS"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-var">PS</span></a></span></span><span> </span><span id="local-6989586621679307026"><span class="annot"><a href="#local-6989586621679307026"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679307024"><span class="annot"><a href="#local-6989586621679307024"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679307025"><span class="annot"><a href="#local-6989586621679307025"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span id="PS"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-var">PS</span></a></span></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="psItem"><span class="annot"><span class="annottext">()
</span><a href="Typescript.Json.Types.Combinators.html#psItem"><span class="hs-identifier hs-var hs-var">psItem</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679307026"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679307025"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psParser"><span class="annot"><span class="annottext">()
</span><a href="Typescript.Json.Types.Combinators.html#psParser"><span class="hs-identifier hs-var hs-var">psParser</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679307025"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679307024"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psSerializer"><span class="annot"><span class="annottext">()
</span><a href="Typescript.Json.Types.Combinators.html#psSerializer"><span class="hs-identifier hs-var hs-var">psSerializer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679307024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679307025"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span id="local-6989586621679306697"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Invariant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-type">PS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306697"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621679306694"><span class="annot"><span class="annottext">invmap :: (a -&gt; b) -&gt; (b -&gt; a) -&gt; PS f a -&gt; PS f b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">invmap</span></span></span><span> </span><span id="local-6989586621679306692"><span class="annot"><span class="annottext">f :: a -&gt; b
</span><a href="#local-6989586621679306692"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679306691"><span class="annot"><span class="annottext">g :: b -&gt; a
</span><a href="#local-6989586621679306691"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-type">PS</span></a></span><span> </span><span id="local-6989586621679306690"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306690"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679306689"><span class="annot"><span class="annottext">h :: r -&gt; Either Text a
</span><a href="#local-6989586621679306689"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306688"><span class="annot"><span class="annottext">k :: a -&gt; r
</span><a href="#local-6989586621679306688"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f r -&gt; (r -&gt; Either Text b) -&gt; (b -&gt; r) -&gt; PS f b
forall (f :: * -&gt; *) a r.
f r -&gt; (r -&gt; Either Text a) -&gt; (a -&gt; r) -&gt; PS f a
</span><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-var">PS</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306690"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Either Text a -&gt; Either Text b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679306692"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either Text a -&gt; Either Text b)
-&gt; (r -&gt; Either Text a) -&gt; r -&gt; Either Text b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; Either Text a
</span><a href="#local-6989586621679306689"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679306688"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; r) -&gt; (b -&gt; a) -&gt; b -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; a
</span><a href="#local-6989586621679306691"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HFunctor</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-type">PS</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621679306684"><span class="annot"><span class="annottext">hmap :: (f ~&gt; g) -&gt; PS f ~&gt; PS g
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hmap</span></span></span><span> </span><span id="local-6989586621679306682"><span class="annot"><span class="annottext">f :: f ~&gt; g
</span><a href="#local-6989586621679306682"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-type">PS</span></a></span><span> </span><span id="local-6989586621679306681"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306681"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679306680"><span class="annot"><span class="annottext">g :: r -&gt; Either Text x
</span><a href="#local-6989586621679306680"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306679"><span class="annot"><span class="annottext">h :: x -&gt; r
</span><a href="#local-6989586621679306679"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">g r -&gt; (r -&gt; Either Text x) -&gt; (x -&gt; r) -&gt; PS g x
forall (f :: * -&gt; *) a r.
f r -&gt; (r -&gt; Either Text a) -&gt; (a -&gt; r) -&gt; PS f a
</span><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-var">PS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f r -&gt; g r
f ~&gt; g
</span><a href="#local-6989586621679306682"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306681"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">r -&gt; Either Text x
</span><a href="#local-6989586621679306680"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679306679"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Inject</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-type">PS</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>    </span><span id="local-6989586621679306675"><span class="annot"><span class="annottext">inject :: f x -&gt; PS f x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></span></span><span> </span><span id="local-6989586621679306673"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306673"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f x -&gt; (x -&gt; Either Text x) -&gt; (x -&gt; x) -&gt; PS f x
forall (f :: * -&gt; *) a r.
f r -&gt; (r -&gt; Either Text a) -&gt; (a -&gt; r) -&gt; PS f a
</span><a href="Typescript.Json.Types.Combinators.html#PS"><span class="hs-identifier hs-var">PS</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306673"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Either Text x
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; x
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | If @h a@ is some sort of witness on @a@, then @ILan g h a@ essentially</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- turns it into a witness on @g a@.</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- It's used twice in the library: with @[]@, it turns @F a@,</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- a serializer/parser on @a@, into @ILan [] F [a]@, a serializer/parser on </span><span>
</span><span id="line-80"></span><span class="hs-comment">-- @[a]@, a list of them.  It also does the same thing with @Maybe@, for</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- optional parsers.</span><span>
</span><span id="line-82"></span><span class="hs-comment">--</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- For all of the functions here, it's generally more understandable when</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- you substitute a specific functor in for @g@.</span><span>
</span><span id="line-85"></span><span class="hs-comment">--</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- Construct using 'ilan', usually.</span><span>
</span><span id="line-87"></span><span class="hs-keyword">data</span><span> </span><span id="ILan"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span></span><span> </span><span id="local-6989586621679306991"><span class="annot"><a href="#local-6989586621679306991"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679306988"><span class="annot"><a href="#local-6989586621679306988"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span id="local-6989586621679306989"><span class="annot"><a href="#local-6989586621679306989"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306990"><span class="annot"><a href="#local-6989586621679306990"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span id="ILan"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306991"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306990"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306989"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306989"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306991"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306990"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306988"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306990"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-comment">-- | Given a witness @h a@, turn it into a witness @h (g a)@ using 'ILan'.</span><span>
</span><span id="line-90"></span><span id="local-6989586621679306668"><span id="local-6989586621679306669"><span id="local-6989586621679306670"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ilan"><span class="hs-identifier hs-type">ilan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679306670"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306669"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306668"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306670"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306668"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306669"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-91"></span><span id="ilan"><span class="annot"><span class="annottext">ilan :: h a -&gt; ILan g h (g a)
</span><a href="Typescript.Json.Types.Combinators.html#ilan"><span class="hs-identifier hs-var hs-var">ilan</span></a></span></span><span> </span><span id="local-6989586621679306667"><span class="annot"><span class="annottext">x :: h a
</span><a href="#local-6989586621679306667"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g a -&gt; g a) -&gt; (g a -&gt; g a) -&gt; h a -&gt; ILan g h (g a)
forall k (g :: k -&gt; *) (h :: k -&gt; *) a (x :: k).
(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; h x -&gt; ILan g h a
</span><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span><span> </span><span class="annot"><span class="annottext">g a -&gt; g a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">g a -&gt; g a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">h a
</span><a href="#local-6989586621679306667"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span id="local-6989586621679306665"><span id="local-6989586621679306666"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Invariant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306666"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306665"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621679306663"><span class="annot"><span class="annottext">invmap :: (a -&gt; b) -&gt; (b -&gt; a) -&gt; ILan g h a -&gt; ILan g h b
</span><a href="#local-6989586621679306663"><span class="hs-identifier hs-var hs-var hs-var hs-var">invmap</span></a></span></span><span> </span><span id="local-6989586621679306662"><span class="annot"><span class="annottext">f :: a -&gt; b
</span><a href="#local-6989586621679306662"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679306661"><span class="annot"><span class="annottext">g :: b -&gt; a
</span><a href="#local-6989586621679306661"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span id="local-6989586621679306660"><span class="annot"><span class="annottext">h :: g x -&gt; a
</span><a href="#local-6989586621679306660"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306659"><span class="annot"><span class="annottext">k :: a -&gt; g x
</span><a href="#local-6989586621679306659"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679306658"><span class="annot"><span class="annottext">x :: h x
</span><a href="#local-6989586621679306658"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g x -&gt; b) -&gt; (b -&gt; g x) -&gt; h x -&gt; ILan g h b
forall k (g :: k -&gt; *) (h :: k -&gt; *) a (x :: k).
(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; h x -&gt; ILan g h a
</span><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679306662"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (g x -&gt; a) -&gt; g x -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">g x -&gt; a
</span><a href="#local-6989586621679306660"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; g x
</span><a href="#local-6989586621679306659"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; g x) -&gt; (b -&gt; a) -&gt; b -&gt; g x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; a
</span><a href="#local-6989586621679306661"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">h x
</span><a href="#local-6989586621679306658"><span class="hs-identifier hs-var">x</span></a></span></span></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span id="local-6989586621679306657"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HFunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306657"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621679306655"><span class="annot"><span class="annottext">hmap :: (f ~&gt; g) -&gt; ILan g f ~&gt; ILan g g
</span><a href="#local-6989586621679306655"><span class="hs-identifier hs-var hs-var hs-var hs-var">hmap</span></a></span></span><span> </span><span id="local-6989586621679306654"><span class="annot"><span class="annottext">f :: f ~&gt; g
</span><a href="#local-6989586621679306654"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span id="local-6989586621679306653"><span class="annot"><span class="annottext">h :: g x -&gt; x
</span><a href="#local-6989586621679306653"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306652"><span class="annot"><span class="annottext">k :: x -&gt; g x
</span><a href="#local-6989586621679306652"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679306651"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306651"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g x -&gt; x) -&gt; (x -&gt; g x) -&gt; g x -&gt; ILan g g x
forall k (g :: k -&gt; *) (h :: k -&gt; *) a (x :: k).
(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; h x -&gt; ILan g h a
</span><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span><span> </span><span class="annot"><span class="annottext">g x -&gt; x
</span><a href="#local-6989586621679306653"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; g x
</span><a href="#local-6989586621679306652"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f x -&gt; g x
f ~&gt; g
</span><a href="#local-6989586621679306654"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306651"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span id="local-6989586621679306650"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTraversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306650"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-100"></span><span>    </span><span id="local-6989586621679306646"><span class="annot"><span class="annottext">htraverse :: (forall (x :: k). f x -&gt; h (g x)) -&gt; ILan g f a -&gt; h (ILan g g a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">htraverse</span></span></span><span> </span><span id="local-6989586621679306644"><span class="annot"><span class="annottext">f :: forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306644"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span id="local-6989586621679306643"><span class="annot"><span class="annottext">g :: g x -&gt; a
</span><a href="#local-6989586621679306643"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306642"><span class="annot"><span class="annottext">h :: a -&gt; g x
</span><a href="#local-6989586621679306642"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306641"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306641"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; g x -&gt; ILan g g a
forall k (g :: k -&gt; *) (h :: k -&gt; *) a (x :: k).
(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; h x -&gt; ILan g h a
</span><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span><span> </span><span class="annot"><span class="annottext">g x -&gt; a
</span><a href="#local-6989586621679306643"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; g x
</span><a href="#local-6989586621679306642"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(g x -&gt; ILan g g a) -&gt; h (g x) -&gt; h (ILan g g a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f x -&gt; h (g x)
forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306644"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306641"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621679306639"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTraversable1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306639"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621679306635"><span class="annot"><span class="annottext">htraverse1 :: (forall (x :: k). f x -&gt; h (g x)) -&gt; ILan g f a -&gt; h (ILan g g a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">htraverse1</span></span></span><span> </span><span id="local-6989586621679306633"><span class="annot"><span class="annottext">f :: forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306633"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span id="local-6989586621679306632"><span class="annot"><span class="annottext">g :: g x -&gt; a
</span><a href="#local-6989586621679306632"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306631"><span class="annot"><span class="annottext">h :: a -&gt; g x
</span><a href="#local-6989586621679306631"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306630"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306630"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; g x -&gt; ILan g g a
forall k (g :: k -&gt; *) (h :: k -&gt; *) a (x :: k).
(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; h x -&gt; ILan g h a
</span><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-var">ILan</span></a></span><span> </span><span class="annot"><span class="annottext">g x -&gt; a
</span><a href="#local-6989586621679306632"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; g x
</span><a href="#local-6989586621679306631"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(g x -&gt; ILan g g a) -&gt; h (g x) -&gt; h (ILan g g a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f x -&gt; h (g x)
forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306633"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306630"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | Interpret 'ILan' into any invariant context, within its &quot;lifted&quot;</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- witness.</span><span>
</span><span id="line-107"></span><span class="hs-comment">--</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- For example, for @'ILan' []@, its type is:</span><span>
</span><span id="line-109"></span><span class="hs-comment">--</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- (forall x. h x -&gt; f [x])</span><span>
</span><span id="line-112"></span><span class="hs-comment">--   -&gt; ILan g h a</span><span>
</span><span id="line-113"></span><span class="hs-comment">--   -&gt; f a</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-115"></span><span class="hs-comment">--</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- If you can interpret @h x@ into a list of @x@ in some context, then it</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- interprets out the @a@.</span><span>
</span><span id="line-118"></span><span id="local-6989586621679306918"><span id="local-6989586621679306919"><span id="local-6989586621679306920"><span id="local-6989586621679306921"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretILan"><span class="hs-identifier hs-type">interpretILan</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Invariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679306921"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306937"><span class="annot"><a href="#local-6989586621679306937"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306920"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306937"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306921"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306919"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306937"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306919"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306920"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306918"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306921"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306918"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-123"></span><span id="interpretILan"><span class="annot"><span class="annottext">interpretILan :: (forall (x :: k). h x -&gt; f (g x)) -&gt; ILan g h a -&gt; f a
</span><a href="Typescript.Json.Types.Combinators.html#interpretILan"><span class="hs-identifier hs-var hs-var">interpretILan</span></a></span></span><span> </span><span id="local-6989586621679306629"><span class="annot"><span class="annottext">f :: forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306629"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span id="local-6989586621679306628"><span class="annot"><span class="annottext">g :: g x -&gt; a
</span><a href="#local-6989586621679306628"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306627"><span class="annot"><span class="annottext">h :: a -&gt; g x
</span><a href="#local-6989586621679306627"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306626"><span class="annot"><span class="annottext">x :: h x
</span><a href="#local-6989586621679306626"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(g x -&gt; a) -&gt; (a -&gt; g x) -&gt; f (g x) -&gt; f a
forall (f :: * -&gt; *) a b.
Invariant f =&gt;
(a -&gt; b) -&gt; (b -&gt; a) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">invmap</span></span><span> </span><span class="annot"><span class="annottext">g x -&gt; a
</span><a href="#local-6989586621679306628"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; g x
</span><a href="#local-6989586621679306627"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">h x -&gt; f (g x)
forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306629"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">h x
</span><a href="#local-6989586621679306626"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- | Interpret 'ILan', but requiring only a 'Functor' context.</span><span>
</span><span id="line-126"></span><span id="local-6989586621679306622"><span id="local-6989586621679306623"><span id="local-6989586621679306624"><span id="local-6989586621679306625"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretCoILan"><span class="hs-identifier hs-type">interpretCoILan</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679306625"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306930"><span class="annot"><a href="#local-6989586621679306930"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306624"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306930"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306625"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306623"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306930"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306623"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306624"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306622"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306625"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306622"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-131"></span><span id="interpretCoILan"><span class="annot"><span class="annottext">interpretCoILan :: (forall (x :: k). h x -&gt; f (g x)) -&gt; ILan g h a -&gt; f a
</span><a href="Typescript.Json.Types.Combinators.html#interpretCoILan"><span class="hs-identifier hs-var hs-var">interpretCoILan</span></a></span></span><span> </span><span id="local-6989586621679306621"><span class="annot"><span class="annottext">f :: forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306621"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WrappedFunctor f a -&gt; f a
forall k (f :: k -&gt; *) (a :: k). WrappedFunctor f a -&gt; f a
</span><span class="hs-identifier hs-var hs-var">unwrapFunctor</span></span><span> </span><span class="annot"><span class="annottext">(WrappedFunctor f a -&gt; f a)
-&gt; (ILan g h a -&gt; WrappedFunctor f a) -&gt; ILan g h a -&gt; f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(forall (x :: k). h x -&gt; WrappedFunctor f (g x))
-&gt; ILan g h a -&gt; WrappedFunctor f a
forall k (f :: * -&gt; *) (h :: k -&gt; *) (g :: k -&gt; *) a.
Invariant f =&gt;
(forall (x :: k). h x -&gt; f (g x)) -&gt; ILan g h a -&gt; f a
</span><a href="Typescript.Json.Types.Combinators.html#interpretILan"><span class="hs-identifier hs-var">interpretILan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f (g x) -&gt; WrappedFunctor f (g x)
forall k (f :: k -&gt; *) (a :: k). f a -&gt; WrappedFunctor f a
</span><span class="hs-identifier hs-var">WrapFunctor</span></span><span> </span><span class="annot"><span class="annottext">(f (g x) -&gt; WrappedFunctor f (g x))
-&gt; (h x -&gt; f (g x)) -&gt; h x -&gt; WrappedFunctor f (g x)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">h x -&gt; f (g x)
forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306621"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Interpret 'ILan', but requiring only a 'Contravariant' context.</span><span>
</span><span id="line-134"></span><span id="local-6989586621679306615"><span id="local-6989586621679306616"><span id="local-6989586621679306617"><span id="local-6989586621679306618"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#interpretContraILan"><span class="hs-identifier hs-type">interpretContraILan</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679306618"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306911"><span class="annot"><a href="#local-6989586621679306911"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306617"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306911"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306618"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306616"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306911"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ILan"><span class="hs-identifier hs-type">ILan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306616"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306617"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306615"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306618"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306615"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-139"></span><span id="interpretContraILan"><span class="annot"><span class="annottext">interpretContraILan :: (forall (x :: k). h x -&gt; f (g x)) -&gt; ILan g h a -&gt; f a
</span><a href="Typescript.Json.Types.Combinators.html#interpretContraILan"><span class="hs-identifier hs-var hs-var">interpretContraILan</span></a></span></span><span> </span><span id="local-6989586621679306613"><span class="annot"><span class="annottext">f :: forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306613"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WrappedContravariant f a -&gt; f a
forall k (f :: k -&gt; *) (a :: k). WrappedContravariant f a -&gt; f a
</span><span class="hs-identifier hs-var hs-var">unwrapContravariant</span></span><span> </span><span class="annot"><span class="annottext">(WrappedContravariant f a -&gt; f a)
-&gt; (ILan g h a -&gt; WrappedContravariant f a) -&gt; ILan g h a -&gt; f a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(forall (x :: k). h x -&gt; WrappedContravariant f (g x))
-&gt; ILan g h a -&gt; WrappedContravariant f a
forall k (f :: * -&gt; *) (h :: k -&gt; *) (g :: k -&gt; *) a.
Invariant f =&gt;
(forall (x :: k). h x -&gt; f (g x)) -&gt; ILan g h a -&gt; f a
</span><a href="Typescript.Json.Types.Combinators.html#interpretILan"><span class="hs-identifier hs-var">interpretILan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f (g x) -&gt; WrappedContravariant f (g x)
forall k (f :: k -&gt; *) (a :: k). f a -&gt; WrappedContravariant f a
</span><span class="hs-identifier hs-var">WrapContravariant</span></span><span> </span><span class="annot"><span class="annottext">(f (g x) -&gt; WrappedContravariant f (g x))
-&gt; (h x -&gt; f (g x)) -&gt; h x -&gt; WrappedContravariant f (g x)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">h x -&gt; f (g x)
forall (x :: k). h x -&gt; f (g x)
</span><a href="#local-6989586621679306613"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Invariant Coyoneda: the &quot;free invariant functor&quot;.  Gives any @f@ and</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- 'Invariant' instance.</span><span>
</span><span id="line-143"></span><span class="hs-keyword">data</span><span> </span><span id="ICoyoneda"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span></span><span> </span><span id="local-6989586621679306892"><span class="annot"><a href="#local-6989586621679306892"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306894"><span class="annot"><a href="#local-6989586621679306894"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306893"><span class="annot"><a href="#local-6989586621679306893"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span id="ICoyoneda"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306894"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306893"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306893"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306894"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306892"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306893"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span id="local-6989586621679306609"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Invariant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306609"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679306607"><span class="annot"><span class="annottext">invmap :: (a -&gt; b) -&gt; (b -&gt; a) -&gt; ICoyoneda f a -&gt; ICoyoneda f b
</span><a href="#local-6989586621679306607"><span class="hs-identifier hs-var hs-var hs-var hs-var">invmap</span></a></span></span><span> </span><span id="local-6989586621679306606"><span class="annot"><span class="annottext">f :: a -&gt; b
</span><a href="#local-6989586621679306606"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679306605"><span class="annot"><span class="annottext">g :: b -&gt; a
</span><a href="#local-6989586621679306605"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span id="local-6989586621679306604"><span class="annot"><span class="annottext">h :: a -&gt; r
</span><a href="#local-6989586621679306604"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306603"><span class="annot"><span class="annottext">k :: r -&gt; a
</span><a href="#local-6989586621679306603"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679306602"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306602"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(b -&gt; r) -&gt; (r -&gt; b) -&gt; f r -&gt; ICoyoneda f b
forall (f :: * -&gt; *) a r.
(a -&gt; r) -&gt; (r -&gt; a) -&gt; f r -&gt; ICoyoneda f a
</span><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679306604"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; r) -&gt; (b -&gt; a) -&gt; b -&gt; r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; a
</span><a href="#local-6989586621679306605"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679306606"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (r -&gt; a) -&gt; r -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; a
</span><a href="#local-6989586621679306603"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306602"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HFunctor</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679306600"><span class="annot"><span class="annottext">hmap :: (f ~&gt; g) -&gt; ICoyoneda f ~&gt; ICoyoneda g
</span><a href="#local-6989586621679306600"><span class="hs-identifier hs-var hs-var hs-var hs-var">hmap</span></a></span></span><span> </span><span id="local-6989586621679306599"><span class="annot"><span class="annottext">f :: f ~&gt; g
</span><a href="#local-6989586621679306599"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span id="local-6989586621679306598"><span class="annot"><span class="annottext">h :: x -&gt; r
</span><a href="#local-6989586621679306598"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306597"><span class="annot"><span class="annottext">k :: r -&gt; x
</span><a href="#local-6989586621679306597"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679306596"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306596"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; r) -&gt; (r -&gt; x) -&gt; g r -&gt; ICoyoneda g x
forall (f :: * -&gt; *) a r.
(a -&gt; r) -&gt; (r -&gt; a) -&gt; f r -&gt; ICoyoneda f a
</span><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679306598"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">r -&gt; x
</span><a href="#local-6989586621679306597"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f r -&gt; g r
f ~&gt; g
</span><a href="#local-6989586621679306599"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306596"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTraversable</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621679306593"><span class="annot"><span class="annottext">htraverse :: (forall x. f x -&gt; h (g x)) -&gt; ICoyoneda f a -&gt; h (ICoyoneda g a)
</span><a href="#local-6989586621679306593"><span class="hs-identifier hs-var hs-var hs-var hs-var">htraverse</span></a></span></span><span> </span><span id="local-6989586621679306592"><span class="annot"><span class="annottext">f :: forall x. f x -&gt; h (g x)
</span><a href="#local-6989586621679306592"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span id="local-6989586621679306591"><span class="annot"><span class="annottext">h :: a -&gt; r
</span><a href="#local-6989586621679306591"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306590"><span class="annot"><span class="annottext">k :: r -&gt; a
</span><a href="#local-6989586621679306590"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679306589"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306589"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; r) -&gt; (r -&gt; a) -&gt; g r -&gt; ICoyoneda g a
forall (f :: * -&gt; *) a r.
(a -&gt; r) -&gt; (r -&gt; a) -&gt; f r -&gt; ICoyoneda f a
</span><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679306591"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">r -&gt; a
</span><a href="#local-6989586621679306590"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(g r -&gt; ICoyoneda g a) -&gt; h (g r) -&gt; h (ICoyoneda g a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f r -&gt; h (g r)
forall x. f x -&gt; h (g x)
</span><a href="#local-6989586621679306592"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306589"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Inject</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679306586"><span class="annot"><span class="annottext">inject :: f x -&gt; ICoyoneda f x
</span><a href="#local-6989586621679306586"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span id="local-6989586621679306585"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306585"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; x) -&gt; (x -&gt; x) -&gt; f x -&gt; ICoyoneda f x
forall (f :: * -&gt; *) a r.
(a -&gt; r) -&gt; (r -&gt; a) -&gt; f r -&gt; ICoyoneda f a
</span><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-var">ICoyoneda</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; x
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; x
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306585"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621679306584"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679306581"><span class="annot"><span class="hs-identifier hs-type">Invariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679306584"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interpret</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306584"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621679306578"><span class="annot"><span class="annottext">interpret :: (g ~&gt; f) -&gt; ICoyoneda g ~&gt; f
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">interpret</span></span></span><span> </span><span id="local-6989586621679306576"><span class="annot"><span class="annottext">f :: g ~&gt; f
</span><a href="#local-6989586621679306576"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span id="local-6989586621679306575"><span class="annot"><span class="annottext">g :: x -&gt; r
</span><a href="#local-6989586621679306575"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306574"><span class="annot"><span class="annottext">h :: r -&gt; x
</span><a href="#local-6989586621679306574"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679306573"><span class="annot"><span class="annottext">x :: g r
</span><a href="#local-6989586621679306573"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; x) -&gt; (x -&gt; r) -&gt; f r -&gt; f x
forall (f :: * -&gt; *) a b.
Invariant f =&gt;
(a -&gt; b) -&gt; (b -&gt; a) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">invmap</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; x
</span><a href="#local-6989586621679306574"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679306575"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(f r -&gt; f x) -&gt; f r -&gt; f x
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">g r -&gt; f r
g ~&gt; f
</span><a href="#local-6989586621679306576"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">g r
</span><a href="#local-6989586621679306573"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- | Strip out the covariant aspect of an invariant coyoneda to leave the</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- contravariant part.</span><span>
</span><span id="line-162"></span><span id="local-6989586621679306572"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#icoToContraco"><span class="hs-identifier hs-type">icoToContraco</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306572"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Coyoneda</span></span><span> </span><span class="annot"><a href="#local-6989586621679306572"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-163"></span><span id="icoToContraco"><span class="annot"><span class="annottext">icoToContraco :: ICoyoneda f x -&gt; Coyoneda f x
</span><a href="Typescript.Json.Types.Combinators.html#icoToContraco"><span class="hs-identifier hs-var hs-var">icoToContraco</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span id="local-6989586621679306571"><span class="annot"><span class="annottext">f :: x -&gt; r
</span><a href="#local-6989586621679306571"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679306570"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306570"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; r) -&gt; f r -&gt; Coyoneda f x
forall a b (f :: * -&gt; *). (a -&gt; b) -&gt; f b -&gt; Coyoneda f a
</span><span class="hs-identifier hs-var">CC.Coyoneda</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679306571"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306570"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | Strip out the contravariant aspect of an invariant coyoneda to leave the</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- covariant part.</span><span>
</span><span id="line-167"></span><span id="local-6989586621679306568"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#icoToCoco"><span class="hs-identifier hs-type">icoToCoco</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306568"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coyoneda</span></span><span> </span><span class="annot"><a href="#local-6989586621679306568"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-168"></span><span id="icoToCoco"><span class="annot"><span class="annottext">icoToCoco :: ICoyoneda f x -&gt; Coyoneda f x
</span><a href="Typescript.Json.Types.Combinators.html#icoToCoco"><span class="hs-identifier hs-var hs-var">icoToCoco</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#ICoyoneda"><span class="hs-identifier hs-type">ICoyoneda</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679306567"><span class="annot"><span class="annottext">g :: r -&gt; x
</span><a href="#local-6989586621679306567"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679306566"><span class="annot"><span class="annottext">x :: f r
</span><a href="#local-6989586621679306566"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; x) -&gt; f r -&gt; Coyoneda f x
forall b a (f :: * -&gt; *). (b -&gt; a) -&gt; f b -&gt; Coyoneda f a
</span><span class="hs-identifier hs-var">Coyoneda</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; x
</span><a href="#local-6989586621679306567"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">f r
</span><a href="#local-6989586621679306566"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#splitAp"><span class="hs-identifier hs-type">splitAp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306564"><span class="annot"><a href="#local-6989586621679306564"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306563"><span class="annot"><a href="#local-6989586621679306563"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="annot"><a href="#local-6989586621679306564"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306563"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Some</span></span><span> </span><span class="annot"><a href="#local-6989586621679306564"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-171"></span><span id="splitAp"><span class="annot"><span class="annottext">splitAp :: Ap f b -&gt; [Some f]
</span><a href="Typescript.Json.Types.Combinators.html#splitAp"><span class="hs-identifier hs-var hs-var">splitAp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ap f b -&gt; [Some f]
forall c. Ap f c -&gt; [Some f]
</span><a href="#local-6989586621679306562"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621679306849"><span class="annot"><a href="#local-6989586621679306562"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="annot"><a href="#local-6989586621679306564"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306849"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Some</span></span><span> </span><span class="annot"><a href="#local-6989586621679306564"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621679306562"><span class="annot"><span class="annottext">go :: Ap f c -&gt; [Some f]
</span><a href="#local-6989586621679306562"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span id="local-6989586621679306559"><span class="annot"><span class="annottext">x :: f a1
</span><a href="#local-6989586621679306559"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679306558"><span class="annot"><span class="annottext">xs :: Ap f (a1 -&gt; c)
</span><a href="#local-6989586621679306558"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a1 -&gt; Some f
forall k (tag :: k -&gt; *) (a :: k). tag a -&gt; Some tag
</span><span class="hs-identifier hs-var">Some</span></span><span> </span><span class="annot"><span class="annottext">f a1
</span><a href="#local-6989586621679306559"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Some f -&gt; [Some f] -&gt; [Some f]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Ap f (a1 -&gt; c) -&gt; [Some f]
forall c. Ap f c -&gt; [Some f]
</span><a href="#local-6989586621679306562"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Ap f (a1 -&gt; c)
</span><a href="#local-6989586621679306558"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-keyword">data</span><span> </span><span id="MP"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier hs-var">MP</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679306556"><span class="annot"><a href="#local-6989586621679306556"><span class="hs-identifier hs-type hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679306556"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621679306836"><span id="MPNothing"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPNothing"><span class="hs-identifier hs-var">MPNothing</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier hs-type">MP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306836"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span></span><span>
</span><span id="line-180"></span><span>    </span><span id="local-6989586621679306554"><span id="local-6989586621679306833"><span id="MPJust"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPJust"><span class="hs-identifier hs-var">MPJust</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679306833"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306554"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier hs-type">MP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306833"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679306554"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HFunctor</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier hs-type">MP</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>    </span><span id="local-6989586621679306551"><span class="annot"><span class="annottext">hmap :: (f ~&gt; g) -&gt; MP f ~&gt; MP g
</span><a href="#local-6989586621679306551"><span class="hs-identifier hs-var hs-var hs-var hs-var">hmap</span></a></span></span><span> </span><span id="local-6989586621679306550"><span class="annot"><span class="annottext">f :: f ~&gt; g
</span><a href="#local-6989586621679306550"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPNothing"><span class="hs-identifier hs-type">MPNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MP g x
forall k (f :: k -&gt; *). MP f 'Nothing
</span><a href="Typescript.Json.Types.Combinators.html#MPNothing"><span class="hs-identifier hs-var">MPNothing</span></a></span><span>
</span><span id="line-185"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPJust"><span class="hs-identifier hs-type">MPJust</span></a></span><span> </span><span id="local-6989586621679306549"><span class="annot"><span class="annottext">x :: f a
</span><a href="#local-6989586621679306549"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">g a -&gt; MP g ('Just a)
forall a (f :: a -&gt; *) (a :: a). f a -&gt; MP f ('Just a)
</span><a href="Typescript.Json.Types.Combinators.html#MPJust"><span class="hs-identifier hs-var">MPJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f a -&gt; g a
f ~&gt; g
</span><a href="#local-6989586621679306550"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679306549"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTraversable</span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MP"><span class="hs-identifier hs-type">MP</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621679306546"><span class="annot"><span class="annottext">htraverse :: (forall (x :: k). f x -&gt; h (g x)) -&gt; MP f a -&gt; h (MP g a)
</span><a href="#local-6989586621679306546"><span class="hs-identifier hs-var hs-var hs-var hs-var">htraverse</span></a></span></span><span> </span><span id="local-6989586621679306545"><span class="annot"><span class="annottext">f :: forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306545"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-189"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPNothing"><span class="hs-identifier hs-type">MPNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MP g 'Nothing -&gt; h (MP g 'Nothing)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">MP g 'Nothing
forall k (f :: k -&gt; *). MP f 'Nothing
</span><a href="Typescript.Json.Types.Combinators.html#MPNothing"><span class="hs-identifier hs-var">MPNothing</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#MPJust"><span class="hs-identifier hs-type">MPJust</span></a></span><span> </span><span id="local-6989586621679306544"><span class="annot"><span class="annottext">x :: f a
</span><a href="#local-6989586621679306544"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">g a -&gt; MP g ('Just a)
forall a (f :: a -&gt; *) (a :: a). f a -&gt; MP f ('Just a)
</span><a href="Typescript.Json.Types.Combinators.html#MPJust"><span class="hs-identifier hs-var">MPJust</span></a></span><span> </span><span class="annot"><span class="annottext">(g a -&gt; MP g ('Just a)) -&gt; h (g a) -&gt; h (MP g ('Just a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f a -&gt; h (g a)
forall (x :: k). f x -&gt; h (g x)
</span><a href="#local-6989586621679306545"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679306544"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">data</span><span> </span><span id="NP2"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-var">NP2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679306543"><span class="annot"><a href="#local-6989586621679306543"><span class="hs-identifier hs-type hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679306542"><span class="annot"><a href="#local-6989586621679306542"><span class="hs-identifier hs-type hs-type">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679306543"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679306542"><span class="hs-identifier hs-type">j</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span id="local-6989586621679306808"><span id="Nil2"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-var">Nil2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306808"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-194"></span><span>    </span><span id="local-6989586621679306537"><span id="local-6989586621679306538"><span id="local-6989586621679306539"><span id="local-6989586621679306540"><span id="local-6989586621679306801"><span id="%3A%2A%2A"><span class="annot"><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-var">(:**)</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679306801"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306539"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306801"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306538"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306537"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306801"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679306538"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306539"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679306537"><span class="hs-identifier hs-type">bs</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-195"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-type">:**</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#hmap2"><span class="hs-identifier hs-type">hmap2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306535"><span class="annot"><a href="#local-6989586621679306535"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306534"><span class="annot"><a href="#local-6989586621679306534"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679306533"><span class="annot"><a href="#local-6989586621679306533"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679306532"><span class="annot"><a href="#local-6989586621679306532"><span class="hs-identifier hs-type">bs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306820"><span class="annot"><a href="#local-6989586621679306820"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679306819"><span class="annot"><a href="#local-6989586621679306819"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306535"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306820"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306819"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306534"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306820"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306819"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306535"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306533"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306532"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306534"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306533"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306532"><span class="hs-identifier hs-type">bs</span></a></span><span>
</span><span id="line-198"></span><span id="hmap2"><span class="annot"><span class="annottext">hmap2 :: (forall (a :: k) (b :: j). f a b -&gt; g a b)
-&gt; NP2 f as bs -&gt; NP2 g as bs
</span><a href="Typescript.Json.Types.Combinators.html#hmap2"><span class="hs-identifier hs-var hs-var">hmap2</span></a></span></span><span> </span><span id="local-6989586621679306531"><span class="annot"><span class="annottext">f :: forall (a :: k) (b :: j). f a b -&gt; g a b
</span><a href="#local-6989586621679306531"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; NP2 g as bs
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; NP2 g cs ds
</span><a href="#local-6989586621679306530"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621679306813"><span id="local-6989586621679306814"><span class="annot"><a href="#local-6989586621679306530"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306535"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306814"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306813"><span class="hs-identifier hs-type">ds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306534"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306814"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306813"><span class="hs-identifier hs-type">ds</span></a></span></span></span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621679306530"><span class="annot"><span class="annottext">go :: NP2 f cs ds -&gt; NP2 g cs ds
</span><a href="#local-6989586621679306530"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-202"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-type">Nil2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP2 g cs ds
forall k j (f :: k -&gt; j -&gt; *). NP2 f '[] '[]
</span><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-var">Nil2</span></a></span><span>
</span><span id="line-203"></span><span>      </span><span id="local-6989586621679306529"><span class="annot"><span class="annottext">x :: f a b
</span><a href="#local-6989586621679306529"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-type">:**</span></a></span><span> </span><span id="local-6989586621679306528"><span class="annot"><span class="annottext">xs :: NP2 f as bs
</span><a href="#local-6989586621679306528"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a b -&gt; g a b
forall (a :: k) (b :: j). f a b -&gt; g a b
</span><a href="#local-6989586621679306531"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a b
</span><a href="#local-6989586621679306529"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">g a b -&gt; NP2 g as bs -&gt; NP2 g (a : as) (b : bs)
forall a a (f :: a -&gt; a -&gt; *) (a :: a) (b :: a) (as :: [a])
       (bs :: [a]).
f a b -&gt; NP2 f as bs -&gt; NP2 f (a : as) (b : bs)
</span><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-var">:**</span></a></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; NP2 g as bs
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; NP2 g cs ds
</span><a href="#local-6989586621679306530"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs
</span><a href="#local-6989586621679306528"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#htraverse2"><span class="hs-identifier hs-type">htraverse2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306762"><span class="annot"><a href="#local-6989586621679306762"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306761"><span class="annot"><a href="#local-6989586621679306761"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679306763"><span class="annot"><a href="#local-6989586621679306763"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span id="local-6989586621679306760"><span class="annot"><a href="#local-6989586621679306760"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679306759"><span class="annot"><a href="#local-6989586621679306759"><span class="hs-identifier hs-type">bs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679306763"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306793"><span class="annot"><a href="#local-6989586621679306793"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679306792"><span class="annot"><a href="#local-6989586621679306792"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306762"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306793"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306792"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306763"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306761"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306793"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306792"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306762"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306760"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306759"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306763"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306761"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306760"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306759"><span class="hs-identifier hs-type">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span id="htraverse2"><span class="annot"><span class="annottext">htraverse2 :: (forall (a :: k) (b :: j). f a b -&gt; h (g a b))
-&gt; NP2 f as bs -&gt; h (NP2 g as bs)
</span><a href="Typescript.Json.Types.Combinators.html#htraverse2"><span class="hs-identifier hs-var hs-var">htraverse2</span></a></span></span><span> </span><span id="local-6989586621679306527"><span class="annot"><span class="annottext">f :: forall (a :: k) (b :: j). f a b -&gt; h (g a b)
</span><a href="#local-6989586621679306527"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; h (NP2 g as bs)
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; h (NP2 g cs ds)
</span><a href="#local-6989586621679306526"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621679306786"><span id="local-6989586621679306787"><span class="annot"><a href="#local-6989586621679306526"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306762"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306787"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306786"><span class="hs-identifier hs-type">ds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306763"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306761"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306787"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306786"><span class="hs-identifier hs-type">ds</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621679306526"><span class="annot"><span class="annottext">go :: NP2 f cs ds -&gt; h (NP2 g cs ds)
</span><a href="#local-6989586621679306526"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-210"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-type">Nil2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP2 g '[] '[] -&gt; h (NP2 g '[] '[])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">NP2 g '[] '[]
forall k j (f :: k -&gt; j -&gt; *). NP2 f '[] '[]
</span><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-var">Nil2</span></a></span><span>
</span><span id="line-211"></span><span>      </span><span id="local-6989586621679306525"><span class="annot"><span class="annottext">x :: f a b
</span><a href="#local-6989586621679306525"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-type">:**</span></a></span><span> </span><span id="local-6989586621679306524"><span class="annot"><span class="annottext">xs :: NP2 f as bs
</span><a href="#local-6989586621679306524"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">g a b -&gt; NP2 g as bs -&gt; NP2 g (a : as) (b : bs)
forall a a (f :: a -&gt; a -&gt; *) (a :: a) (b :: a) (as :: [a])
       (bs :: [a]).
f a b -&gt; NP2 f as bs -&gt; NP2 f (a : as) (b : bs)
</span><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-var">(:**)</span></a></span><span> </span><span class="annot"><span class="annottext">(g a b -&gt; NP2 g as bs -&gt; NP2 g (a : as) (b : bs))
-&gt; h (g a b) -&gt; h (NP2 g as bs -&gt; NP2 g (a : as) (b : bs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f a b -&gt; h (g a b)
forall (a :: k) (b :: j). f a b -&gt; h (g a b)
</span><a href="#local-6989586621679306527"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a b
</span><a href="#local-6989586621679306525"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">h (NP2 g as bs -&gt; NP2 g (a : as) (b : bs))
-&gt; h (NP2 g as bs) -&gt; h (NP2 g (a : as) (b : bs))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; h (NP2 g as bs)
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; h (NP2 g cs ds)
</span><a href="#local-6989586621679306526"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs
</span><a href="#local-6989586621679306524"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#hfoldMap2"><span class="hs-identifier hs-type">hfoldMap2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306523"><span class="annot"><a href="#local-6989586621679306523"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306522"><span class="annot"><a href="#local-6989586621679306522"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679306521"><span class="annot"><a href="#local-6989586621679306521"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679306520"><span class="annot"><a href="#local-6989586621679306520"><span class="hs-identifier hs-type">bs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679306522"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306774"><span class="annot"><a href="#local-6989586621679306774"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679306773"><span class="annot"><a href="#local-6989586621679306773"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306523"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306774"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306773"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306522"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306523"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306521"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306520"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306522"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-214"></span><span id="hfoldMap2"><span class="annot"><span class="annottext">hfoldMap2 :: (forall (a :: k) (b :: j). f a b -&gt; m) -&gt; NP2 f as bs -&gt; m
</span><a href="Typescript.Json.Types.Combinators.html#hfoldMap2"><span class="hs-identifier hs-var hs-var">hfoldMap2</span></a></span></span><span> </span><span id="local-6989586621679306519"><span class="annot"><span class="annottext">f :: forall (a :: k) (b :: j). f a b -&gt; m
</span><a href="#local-6989586621679306519"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">K m (NP2 Any as bs) -&gt; m
forall k a (b :: k). K a b -&gt; a
</span><span class="hs-identifier hs-var">unK</span></span><span> </span><span class="annot"><span class="annottext">(K m (NP2 Any as bs) -&gt; m)
-&gt; (NP2 f as bs -&gt; K m (NP2 Any as bs)) -&gt; NP2 f as bs -&gt; m
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(forall (a :: k) (b :: j). f a b -&gt; K m (Any a b))
-&gt; NP2 f as bs -&gt; K m (NP2 Any as bs)
forall k j (f :: k -&gt; j -&gt; *) (g :: k -&gt; j -&gt; *) (h :: * -&gt; *)
       (as :: [k]) (bs :: [j]).
Applicative h =&gt;
(forall (a :: k) (b :: j). f a b -&gt; h (g a b))
-&gt; NP2 f as bs -&gt; h (NP2 g as bs)
</span><a href="Typescript.Json.Types.Combinators.html#htraverse2"><span class="hs-identifier hs-var">htraverse2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m -&gt; K m (Any a b)
forall k a (b :: k). a -&gt; K a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">(m -&gt; K m (Any a b)) -&gt; (f a b -&gt; m) -&gt; f a b -&gt; K m (Any a b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f a b -&gt; m
forall (a :: k) (b :: j). f a b -&gt; m
</span><a href="#local-6989586621679306519"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#np2Left"><span class="hs-identifier hs-type">np2Left</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306516"><span class="annot"><a href="#local-6989586621679306516"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306515"><span class="annot"><a href="#local-6989586621679306515"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679306514"><span class="annot"><a href="#local-6989586621679306514"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679306513"><span class="annot"><a href="#local-6989586621679306513"><span class="hs-identifier hs-type">bs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306750"><span class="annot"><a href="#local-6989586621679306750"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679306749"><span class="annot"><a href="#local-6989586621679306749"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306516"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306750"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306749"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679306515"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306750"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306516"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306514"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306513"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="annot"><a href="#local-6989586621679306515"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306514"><span class="hs-keyword hs-type">as</span></a></span><span>
</span><span id="line-217"></span><span id="np2Left"><span class="annot"><span class="annottext">np2Left :: (forall (a :: k) (b :: j). f a b -&gt; g a) -&gt; NP2 f as bs -&gt; NP g as
</span><a href="Typescript.Json.Types.Combinators.html#np2Left"><span class="hs-identifier hs-var hs-var">np2Left</span></a></span></span><span> </span><span id="local-6989586621679306512"><span class="annot"><span class="annottext">f :: forall (a :: k) (b :: j). f a b -&gt; g a
</span><a href="#local-6989586621679306512"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; NP g as
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; NP g cs
</span><a href="#local-6989586621679306511"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621679306743"><span id="local-6989586621679306744"><span class="annot"><a href="#local-6989586621679306511"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#NP2"><span class="hs-identifier hs-type">NP2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306516"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306744"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306743"><span class="hs-identifier hs-type">ds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="annot"><a href="#local-6989586621679306515"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306744"><span class="hs-identifier hs-type">cs</span></a></span></span></span><span>
</span><span id="line-220"></span><span>    </span><span id="local-6989586621679306511"><span class="annot"><span class="annottext">go :: NP2 f cs ds -&gt; NP g cs
</span><a href="#local-6989586621679306511"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#Nil2"><span class="hs-identifier hs-type">Nil2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP g cs
forall k (a :: k -&gt; *). NP a '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span>
</span><span id="line-222"></span><span>      </span><span id="local-6989586621679306509"><span class="annot"><span class="annottext">x :: f a b
</span><a href="#local-6989586621679306509"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#%3A%2A%2A"><span class="hs-operator hs-type">:**</span></a></span><span> </span><span id="local-6989586621679306508"><span class="annot"><span class="annottext">xs :: NP2 f as bs
</span><a href="#local-6989586621679306508"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a b -&gt; g a
forall (a :: k) (b :: j). f a b -&gt; g a
</span><a href="#local-6989586621679306512"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a b
</span><a href="#local-6989586621679306509"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">g a -&gt; NP g as -&gt; NP g (a : as)
forall k (a :: k -&gt; *) (x :: k) (xs :: [k]).
a x -&gt; NP a xs -&gt; NP a (x : xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs -&gt; NP g as
forall (cs :: [k]) (ds :: [j]). NP2 f cs ds -&gt; NP g cs
</span><a href="#local-6989586621679306511"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">NP2 f as bs
</span><a href="#local-6989586621679306508"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><a href="Typescript.Json.Types.Combinators.html#findNP"><span class="hs-identifier hs-type">findNP</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306506"><span class="annot"><a href="#local-6989586621679306506"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679306505"><span class="annot"><a href="#local-6989586621679306505"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679306504"><span class="annot"><a href="#local-6989586621679306504"><span class="hs-keyword hs-type">as</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679306730"><span class="annot"><a href="#local-6989586621679306730"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679306506"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306730"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679306505"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306730"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="annot"><a href="#local-6989586621679306506"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306504"><span class="hs-keyword hs-type">as</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><a href="#local-6989586621679306505"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306504"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span id="findNP"><span class="annot"><span class="annottext">findNP :: (forall (a :: k). f a -&gt; Maybe (g a)) -&gt; NP f as -&gt; Maybe (NS g as)
</span><a href="Typescript.Json.Types.Combinators.html#findNP"><span class="hs-identifier hs-var hs-var">findNP</span></a></span></span><span> </span><span id="local-6989586621679306503"><span class="annot"><span class="annottext">f :: forall (a :: k). f a -&gt; Maybe (g a)
</span><a href="#local-6989586621679306503"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP f as -&gt; Maybe (NS g as)
forall (bs :: [k]). NP f bs -&gt; Maybe (NS g bs)
</span><a href="#local-6989586621679306502"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>    </span><span id="local-6989586621679306726"><span class="annot"><a href="#local-6989586621679306502"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="annot"><a href="#local-6989586621679306506"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306726"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><a href="#local-6989586621679306505"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679306726"><span class="hs-identifier hs-type">bs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621679306502"><span class="annot"><span class="annottext">go :: NP f bs -&gt; Maybe (NS g bs)
</span><a href="#local-6989586621679306502"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-233"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Nil</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (NS g bs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-234"></span><span>      </span><span id="local-6989586621679306501"><span class="annot"><span class="annottext">x :: f x
</span><a href="#local-6989586621679306501"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*</span></span><span> </span><span id="local-6989586621679306500"><span class="annot"><span class="annottext">xs :: NP f xs
</span><a href="#local-6989586621679306500"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">g x -&gt; NS g (x : xs)
forall k (a :: k -&gt; *) (x :: k) (xs :: [k]). a x -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="annot"><span class="annottext">(g x -&gt; NS g (x : xs)) -&gt; Maybe (g x) -&gt; Maybe (NS g (x : xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f x -&gt; Maybe (g x)
forall (a :: k). f a -&gt; Maybe (g a)
</span><a href="#local-6989586621679306503"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679306501"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (NS g (x : xs))
-&gt; Maybe (NS g (x : xs)) -&gt; Maybe (NS g (x : xs))
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NS g xs -&gt; NS g (x : xs)
forall k (a :: k -&gt; *) (xs :: [k]) (x :: k).
NS a xs -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">S</span></span><span> </span><span class="annot"><span class="annottext">(NS g xs -&gt; NS g (x : xs))
-&gt; Maybe (NS g xs) -&gt; Maybe (NS g (x : xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NP f xs -&gt; Maybe (NS g xs)
forall (bs :: [k]). NP f bs -&gt; Maybe (NS g bs)
</span><a href="#local-6989586621679306502"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">NP f xs
</span><a href="#local-6989586621679306500"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span></pre></body></html>